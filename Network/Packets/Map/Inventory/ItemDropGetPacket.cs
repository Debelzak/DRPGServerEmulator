using DRPGServer.Game.Data.Models;
using DRPGServer.Network.Enum.Map;

namespace DRPGServer.Network.Packets.Map
{
    public class ItemDropGetPacket(ItemDrop drop, Item inventoryItem) : OutPacket((ushort)PACKET_ID.MAP_ITEM_DROP_GET)
    {
        protected override void Serialize()
        {
            uint row = inventoryItem.SlotPos / 6;
            uint column = inventoryItem.SlotPos % 6;

            WriteBytes([0x01, 0x03, 0x00, 0x00,]);
            WriteInt(drop.PosY);
            WriteInt(drop.PosX);
            WriteUInt(row); // Inventory Position X
            WriteUInt(column); // Inventory Position Y
            WriteUInt(drop.UID);
            WriteUInt(drop.ItemID);
            WriteBytes([0x05, 0x01, 0x00, 0x00]);
            WriteUInt(inventoryItem.Amount);
            WriteBytes([
                0xE7, 0x03, 0x00, 0x00, 0xE8, 0x03, 0x00, 0x00,   0x64, 0x00, 0x00, 0x00,
                0x10, 0x27, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x0F, 0x27, 0x00, 0x7D,
                0x40, 0x42, 0x0F, 0x00, 0x01, 0x01, 0x00, 0x01,
            ]);
            WriteUInt(drop.UID + drop.ItemID);
            WriteBytes([
                0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00
            ]);
        }
    }
}